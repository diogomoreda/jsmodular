var CurlyTemplates=function(){var e,r,a,n,t,s=function(s,c){e=0,r=0,a=[],n=[],t="",a[r]={n:"root",m:""};var h=c||{};return f(s,h)},f=function(s,f){for(var c=0;c<s.length;c++){var h=s.charAt(c);switch(e){case 0:if("{"===h)e=1;else if("}"===h)e=n.length>0?5:0;else{a[r].m+=h;for(var i=0;i<n.length;i++)a[n[i]].m+=h}break;case 1:"{"===h?e=2:-1!=h.search(/^[a-zA-Z0-9_]+$/g)&&(n.unshift(r),r=a.length,a[r]={n:h,m:""},e=4);break;case 2:-1!=h.search(/^[a-zA-Z0-9_]+$/g)?t+=h:"}"===h&&(e=3);break;case 3:if("}"===h){if(t in f){a[r].m+=f[t];for(var i=0;i<n.length;i++)a[n[i]].m+=f[t];t=""}else for(var l=0;l<a.length;l++)if(t==a[l].n){a[r].m+=a[l].m;for(var i=0;i<n.length;i++)a[n[i]].m+=a[l].m;t=""}e=0}break;case 4:-1!=h.search(/^[a-zA-Z0-9_]+$/g)?a[r].n+=h:"{"===h&&(e=0);break;case 5:"}"===h&&(r=n.shift(),e=0)}}return a[0].m};return{parse:s}}();